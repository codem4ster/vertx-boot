
-------
21/15/2019 21:15:53
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/15/2019 21:15:55
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/15/2019 21:15:55
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/16/2019 21:16:57
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/16/2019 21:16:59
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/17/2019 21:17:00
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/18/2019 21:18:33
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/18/2019 21:18:36
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/18/2019 21:18:36
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/21/2019 21:21:10
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/21/2019 21:21:12
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/21/2019 21:21:13
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/23/2019 21:23:19
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/23/2019 21:23:22
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/23/2019 21:23:22
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/30/2019 21:30:10
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/32/2019 21:32:26
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/33/2019 21:33:19
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/34/2019 21:34:16
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/39/2019 21:39:03
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/44/2019 21:44:07
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/44/2019 21:44:21
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/44/2019 21:44:24
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/45/2019 21:45:08
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/45/2019 21:45:14
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/45/2019 21:45:15
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/47/2019 21:47:25
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/47/2019 21:47:31
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/47/2019 21:47:32
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/51/2019 21:51:40
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/56/2019 21:56:02
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/56/2019 21:56:58
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/57/2019 21:57:50
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 
--
-- PostgreSQL database dump
--
-- Dumped from database version 11.2
-- Dumped by pg_dump version 11.0
--
-- Data for Name: image; Type: TABLE DATA; Schema: public; Owner: postgres
--
INSERT INTO public.image VALUES ('80b341fb-1151-4ad6-8988-b0a516adb2e2', 'placeholder', 'jpg', 0, '2019-06-20 23:35:22.519+03') 
--
-- Data for Name: member; Type: TABLE DATA; Schema: public; Owner: postgres
--
INSERT INTO public.member VALUES (1, 'admin', '$2a$10$D9a2twLMHOnQ7II2NWKAbOIsa5osVoGBUJAvsjlBkBDlGPbKmIyHG') 
INSERT INTO public.member VALUES (2, 'onur', '$2a$10$qn2DTVVh3OkHnWMNr3.uPO3jc7Y0uos8nCT1xYaaI.UW5DE4oKkqu') 
--
-- Data for Name: article; Type: TABLE DATA; Schema: public; Owner: postgres
--
INSERT INTO public.article VALUES ('4eac5f28-9070-4f79-9199-13eb6e183f2f', 1, NULL, 'An editor for every project', 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras gravida, mauris quis aliquam porta, est massa pretium enim, vel efficitur elit tortor at neque. Integer quis nibh massa. Nunc at massa malesuada, placerat leo vel, imperdiet arcu.', '<p><img style="float: right;" src="images/glyph-tinymce@2x.png" alt="TinyMCE" height="150px" /></p>
<h2>An editor for every project</h2>
<p>No matter what you''re building, TinyMCE has you covered. From content management to email marketing, here are our customers'' most common uses:</p>
<ul>
<li>Content Management Systems (<em>e.g. WordPress, Umbraco</em>)</li>
<li>Learning Management Systems (<em>e.g. Blackboard</em>)</li>
<li>Customer Relationship Management and marketing automation (<em>e.g. Marketo</em>)</li>
<li>Email marketing (<em>e.g. Constant Contact</em>)</li>
<li>Content creation in SaaS systems (<em>e.g. Eventbrite, Evernote, GoFundMe, Zendesk</em>)</li>
</ul>
<p>These are just the start. TinyMCE is incredibly flexible, and with hundreds of APIs there''s likely a solution for your editor project. If you haven''t experienced Tiny Cloud, get started today. You''ll even get a free trial of our premium plugins &ndash; no credit card required.</p>
<h3>Tiny Drive now available</h3>
<p>We''re excited to announce <strong>Tiny Drive</strong>. File and asset management for TinyMCE, in the cloud, made super easy. Learn more at <a href="drive/">tiny.cloud/drive</a>, where you''ll find a working demo and setup instructions.</p>
<p><img style="float: left;" src="https://www.tiny.cloud/images/drive-demo/hero-background-campaign-alternate.png" alt="" width="332" height="221" /></p>', '<p><img style="float: right;" src="images/glyph-tinymce@2x.png" alt="TinyMCE" height="150px" /></p>
<h2>An editor for every project</h2>
<p>No matter what you''re building, TinyMCE has you covered. From content management to email marketing, here are our customers'' most common uses:</p>
<ul>
<li>Content Management Systems (<em>e.g. WordPress, Umbraco</em>)</li>
<li>Learning Management Systems (<em>e.g. Blackboard</em>)</li>
<li>Customer Relationship Management and marketing automation (<em>e.g. Marketo</em>)</li>
<li>Email marketing (<em>e.g. Constant Contact</em>)</li>
<li>Content creation in SaaS systems (<em>e.g. Eventbrite, Evernote, GoFundMe, Zendesk</em>)</li>
</ul>
<p>These are just the start. TinyMCE is incredibly flexible, and with hundreds of APIs there''s likely a solution for your editor project. If you haven''t experienced Tiny Cloud, get started today. You''ll even get a free trial of our premium plugins &ndash; no credit card required.</p>
<h3>Tiny Drive now available</h3>
<p>We''re excited to announce <strong>Tiny Drive</strong>. File and asset management for TinyMCE, in the cloud, made super easy. Learn more at <a href="drive/">tiny.cloud/drive</a>, where you''ll find a working demo and setup instructions.</p>
<p><img style="float: left;" src="https://www.tiny.cloud/images/drive-demo/hero-background-campaign-alternate.png" alt="" width="332" height="221" /></p>', 'draft', '2019-06-20 23:35:22.541+03', '2019-06-20 23:35:22.541+03') 
INSERT INTO public.article VALUES ('04b5eb79-08b9-47b8-9d8b-b58a26cd4b70', 1, NULL, 'Dier bir blog post', 'Cras gravida, mauris quis aliquam porta, est massa pretium enim, vel efficitur elit tortor at neque. Integer quis nibh massa. Nunc at massa malesuada, placerat leo vel, imperdiet arcu.', '<hr />
<div id="Content">
<div>
<div id="lipsum">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras gravida, mauris quis aliquam porta, est massa pretium enim, vel efficitur elit tortor at neque. Integer quis nibh massa.</p>
<p><span style="font-family: roboto, sans-serif;"> Nunc at massa malesuada, placerat leo vel, imperdiet arcu. Integer semper convallis rhoncus. Cras hendrerit tempor nulla et tristique. Vivamus nec quam in lacus cursus finibus. Morbi <strong>tempus</strong>, quam vitae varius sagittis, tortor ligula sodales elit, eu viverra quam eros et sapien. Aliquam <em>elementum</em> ornare nisl id semper.</span></p>
<p>Vivamus pulvinar a nulla in <span style="text-decoration: underline;">maximus. Donec hendrerit convallis mattis. Ut pretiu</span>m consequat venenatis. Duis auctor rhoncus justo sit amet gravida. Donec sed tempor nibh, in sodales lectus. Morbi at tempus velit. Vestibulum facilisis vulputate dui vel pulvinar. In cursus feugiat elit, eget efficitur purus mollis ac.</p>
</div>
</div>
</div>', '<hr />
<div id="Content">
<div>
<div id="lipsum">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras gravida, mauris quis aliquam porta, est massa pretium enim, vel efficitur elit tortor at neque. Integer quis nibh massa.</p>
<p><span style="font-family: roboto, sans-serif;"> Nunc at massa malesuada, placerat leo vel, imperdiet arcu. Integer semper convallis rhoncus. Cras hendrerit tempor nulla et tristique. Vivamus nec quam in lacus cursus finibus. Morbi <strong>tempus</strong>, quam vitae varius sagittis, tortor ligula sodales elit, eu viverra quam eros et sapien. Aliquam <em>elementum</em> ornare nisl id semper.</span></p>
<p>Vivamus pulvinar a nulla in <span style="text-decoration: underline;">maximus. Donec hendrerit convallis mattis. Ut pretiu</span>m consequat venenatis. Duis auctor rhoncus justo sit amet gravida. Donec sed tempor nibh, in sodales lectus. Morbi at tempus velit. Vestibulum facilisis vulputate dui vel pulvinar. In cursus feugiat elit, eget efficitur purus mollis ac.</p>
</div>
</div>
</div>', 'draft', '2019-06-20 23:35:22.548+03', '2019-06-20 23:35:22.548+03') 
--
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: postgres
--
INSERT INTO public.category VALUES ('66af7f42-20d3-4a6d-b6c8-82e021278a35', NULL, '{}', 0, 0, 'Live Light', '') 
INSERT INTO public.category VALUES ('a75185e8-fd66-46db-8fb5-2e9bda286952', '66af7f42-20d3-4a6d-b6c8-82e021278a35', '{66af7f42-20d3-4a6d-b6c8-82e021278a35}', 0, 1, 'Beslenme', 'Salkl Beslenme, Zararl Besinler, Faydal Bitkiler') 
INSERT INTO public.category VALUES ('c1d9e5ad-1357-4f8b-a27c-8ed62fd8d696', '66af7f42-20d3-4a6d-b6c8-82e021278a35', '{66af7f42-20d3-4a6d-b6c8-82e021278a35}', 1, 1, 'Spor', 'Fitness, Kou, Crossfit ..') 
INSERT INTO public.category VALUES ('7bd7f39e-afda-44ad-8a9c-f6b0f4dc638c', '66af7f42-20d3-4a6d-b6c8-82e021278a35', '{66af7f42-20d3-4a6d-b6c8-82e021278a35}', 2, 1, 'Psikoloji', 'Stres Ynetimi, Psikoljik rahatszlklar ve kkenleri') 
INSERT INTO public.category VALUES ('b2b041a7-ff83-43e1-bd14-f679278200e0', '66af7f42-20d3-4a6d-b6c8-82e021278a35', '{66af7f42-20d3-4a6d-b6c8-82e021278a35}', 3, 1, 'Kiisel Geliim', 'Baar, Motivasyon, Mutluluk ..') 
INSERT INTO public.category VALUES ('76128cda-9d06-4d76-aed9-1460228dd109', NULL, '{}', 1, 0, 'Yaam', '') 
INSERT INTO public.category VALUES ('b22cfefa-9cae-4630-b18a-3cd90b9e7031', '76128cda-9d06-4d76-aed9-1460228dd109', '{76128cda-9d06-4d76-aed9-1460228dd109}', 0, 1, 'likiler', 'letiim, Aile, Toplumsal Cinsiyet') 
INSERT INTO public.category VALUES ('fd8e2622-d87d-4d91-8af6-a47ddb644089', '76128cda-9d06-4d76-aed9-1460228dd109', '{76128cda-9d06-4d76-aed9-1460228dd109}', 1, 1, 'Kltr & Sanat', 'Kitaplar, Sanat Tarihi, Gncel Haberler') 
INSERT INTO public.category VALUES ('af7f2f33-ff4f-4b23-b155-1742909e0ddd', '76128cda-9d06-4d76-aed9-1460228dd109', '{76128cda-9d06-4d76-aed9-1460228dd109}', 2, 1, 'Eitim', 'renme, Etkin Eitim') 
INSERT INTO public.category VALUES ('af351a76-09fa-4170-a8a2-f5c594051725', '76128cda-9d06-4d76-aed9-1460228dd109', '{76128cda-9d06-4d76-aed9-1460228dd109}', 3, 1, 'Teknoloji', 'Teknolojik Gelimeler, Giriimler') 
INSERT INTO public.category VALUES ('76e28d8d-3e41-4d75-8255-afe1714c6f4b', NULL, '{}', 2, 0, 'Yoga & Pilates', '') 
INSERT INTO public.category VALUES ('374cc6a1-7990-4326-b919-07bdd5f0843d', '76e28d8d-3e41-4d75-8255-afe1714c6f4b', '{76e28d8d-3e41-4d75-8255-afe1714c6f4b}', 0, 1, 'Yoga', 'Yoga Trleri, Pozlar, Faydalar') 
INSERT INTO public.category VALUES ('6c143301-3edd-4a57-b8ba-c5067775ebb8', '76e28d8d-3e41-4d75-8255-afe1714c6f4b', '{76e28d8d-3e41-4d75-8255-afe1714c6f4b}', 1, 1, 'Pilates', 'Pilates Hareketleri, Faydalar') 
INSERT INTO public.category VALUES ('d0b89da0-2cce-40cd-b807-6ee035cc31d3', '76e28d8d-3e41-4d75-8255-afe1714c6f4b', '{76e28d8d-3e41-4d75-8255-afe1714c6f4b}', 2, 1, 'Meditasyon', 'Meditasyon Teknikleri, Nefes') 
INSERT INTO public.category VALUES ('c4e87309-72e0-4039-9001-2b83e3e787df', '76e28d8d-3e41-4d75-8255-afe1714c6f4b', '{76e28d8d-3e41-4d75-8255-afe1714c6f4b}', 3, 1, 'Egzersizler', 'Yoga ve Pilates Egzersizleri, Videolar') 
INSERT INTO public.category VALUES ('bc238ffc-acff-4d13-b579-c4afeefdaf48', NULL, '{}', 3, 0, 'Gezi', '') 
INSERT INTO public.category VALUES ('87f6ddf2-cc5f-4f1f-ab33-2eb793975159', 'bc238ffc-acff-4d13-b579-c4afeefdaf48', '{bc238ffc-acff-4d13-b579-c4afeefdaf48}', 0, 1, 'Gezi Rehberi', 'Gezi nerileri, Rotalar, Doal Gzellikler') 
--
-- Data for Name: article_categories; Type: TABLE DATA; Schema: public; Owner: postgres
--
INSERT INTO public.article_categories VALUES ('b2b041a7-ff83-43e1-bd14-f679278200e0', '4eac5f28-9070-4f79-9199-13eb6e183f2f') 
INSERT INTO public.article_categories VALUES ('af351a76-09fa-4170-a8a2-f5c594051725', '04b5eb79-08b9-47b8-9d8b-b58a26cd4b70') 
--
-- Data for Name: comment; Type: TABLE DATA; Schema: public; Owner: postgres
--
INSERT INTO public.comment VALUES (1, '4eac5f28-9070-4f79-9199-13eb6e183f2f', 2, 'Doktor bu ne?') 
INSERT INTO public.comment VALUES (2, '4eac5f28-9070-4f79-9199-13eb6e183f2f', 2, 'Gzel olmu.') 
INSERT INTO public.comment VALUES (3, '4eac5f28-9070-4f79-9199-13eb6e183f2f', 2, 'Hi olmu mu?') 
INSERT INTO public.comment VALUES (4, '4eac5f28-9070-4f79-9199-13eb6e183f2f', 2, 'Eline salk') 
INSERT INTO public.comment VALUES (5, '04b5eb79-08b9-47b8-9d8b-b58a26cd4b70', 2, 'Peki dierleri ne yapt?') 
INSERT INTO public.comment VALUES (6, '04b5eb79-08b9-47b8-9d8b-b58a26cd4b70', 2, 'e yaramaz.') 
INSERT INTO public.comment VALUES (7, '04b5eb79-08b9-47b8-9d8b-b58a26cd4b70', 2, 'Neden byle oldu ki?') 
INSERT INTO public.comment VALUES (8, '04b5eb79-08b9-47b8-9d8b-b58a26cd4b70', 2, 'Sebebi neydi?') 
--
-- Data for Name: role; Type: TABLE DATA; Schema: public; Owner: postgres
--
INSERT INTO public.role VALUES (1, 'admin') 
INSERT INTO public.role VALUES (2, 'member') 
--
-- Data for Name: member_roles; Type: TABLE DATA; Schema: public; Owner: postgres
--
INSERT INTO public.member_roles VALUES (2, 1) 
INSERT INTO public.member_roles VALUES (2, 2) 
--
-- Data for Name: motto; Type: TABLE DATA; Schema: public; Owner: postgres
--
--
-- Name: comment_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--
SELECT pg_catalog.setval('public.comment_id_seq', 8, true) 
--
-- Name: member_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--
SELECT pg_catalog.setval('public.member_id_seq', 2, true) 
--
-- Name: motto_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--
SELECT pg_catalog.setval('public.motto_id_seq', 1, false) 
--
-- Name: role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--
SELECT pg_catalog.setval('public.role_id_seq', 2, true) 
--
-- PostgreSQL database dump complete
--

-------
21/59/2019 21:59:50
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
21/04/2019 22:04:29
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 
--
-- PostgreSQL database dump
--
-- Dumped from database version 11.3
-- Dumped by pg_dump version 11.0
--
-- Data for Name: image; Type: TABLE DATA; Schema: public; Owner: -
--
INSERT INTO public.image VALUES ('bcddeba1-e56c-4dd9-92da-43bf0294eace', 'placeholder', 'jpg', 0, '2019-06-21 21:59:52.797+03') 
--
-- Data for Name: member; Type: TABLE DATA; Schema: public; Owner: -
--
INSERT INTO public.member VALUES ('f60c641c-03f8-4379-b457-6345eb175ce2', 'admin', '$2a$10$G06SfIfw7FiMr8Z4zMiHO.9MybRjTZ4BVs2F1JHHlHbsFzOQ.vgKK') 
INSERT INTO public.member VALUES ('c6dd240b-be4f-4083-a605-e51edb73f23c', 'onur', '$2a$10$sQhcZjFy33gsBFeocGRkAudi6sXZ2fVPK4ems0l7ROz.iEIzMEaka') 
--
-- Data for Name: article; Type: TABLE DATA; Schema: public; Owner: -
--
INSERT INTO public.article VALUES ('cb2d2ca4-0c3a-4829-ac89-33703955c2a6', 'f60c641c-03f8-4379-b457-6345eb175ce2', NULL, 'An editor for every project', 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras gravida, mauris quis aliquam porta, est massa pretium enim, vel efficitur elit tortor at neque. Integer quis nibh massa. Nunc at massa malesuada, placerat leo vel, imperdiet arcu.', '<p><img style="float: right;" src="images/glyph-tinymce@2x.png" alt="TinyMCE" height="150px" /></p>
<h2>An editor for every project</h2>
<p>No matter what you''re building, TinyMCE has you covered. From content management to email marketing, here are our customers'' most common uses:</p>
<ul>
<li>Content Management Systems (<em>e.g. WordPress, Umbraco</em>)</li>
<li>Learning Management Systems (<em>e.g. Blackboard</em>)</li>
<li>Customer Relationship Management and marketing automation (<em>e.g. Marketo</em>)</li>
<li>Email marketing (<em>e.g. Constant Contact</em>)</li>
<li>Content creation in SaaS systems (<em>e.g. Eventbrite, Evernote, GoFundMe, Zendesk</em>)</li>
</ul>
<p>These are just the start. TinyMCE is incredibly flexible, and with hundreds of APIs there''s likely a solution for your editor project. If you haven''t experienced Tiny Cloud, get started today. You''ll even get a free trial of our premium plugins &ndash; no credit card required.</p>
<h3>Tiny Drive now available</h3>
<p>We''re excited to announce <strong>Tiny Drive</strong>. File and asset management for TinyMCE, in the cloud, made super easy. Learn more at <a href="drive/">tiny.cloud/drive</a>, where you''ll find a working demo and setup instructions.</p>
<p><img style="float: left;" src="https://www.tiny.cloud/images/drive-demo/hero-background-campaign-alternate.png" alt="" width="332" height="221" /></p>', '<p><img style="float: right;" src="images/glyph-tinymce@2x.png" alt="TinyMCE" height="150px" /></p>
<h2>An editor for every project</h2>
<p>No matter what you''re building, TinyMCE has you covered. From content management to email marketing, here are our customers'' most common uses:</p>
<ul>
<li>Content Management Systems (<em>e.g. WordPress, Umbraco</em>)</li>
<li>Learning Management Systems (<em>e.g. Blackboard</em>)</li>
<li>Customer Relationship Management and marketing automation (<em>e.g. Marketo</em>)</li>
<li>Email marketing (<em>e.g. Constant Contact</em>)</li>
<li>Content creation in SaaS systems (<em>e.g. Eventbrite, Evernote, GoFundMe, Zendesk</em>)</li>
</ul>
<p>These are just the start. TinyMCE is incredibly flexible, and with hundreds of APIs there''s likely a solution for your editor project. If you haven''t experienced Tiny Cloud, get started today. You''ll even get a free trial of our premium plugins &ndash; no credit card required.</p>
<h3>Tiny Drive now available</h3>
<p>We''re excited to announce <strong>Tiny Drive</strong>. File and asset management for TinyMCE, in the cloud, made super easy. Learn more at <a href="drive/">tiny.cloud/drive</a>, where you''ll find a working demo and setup instructions.</p>
<p><img style="float: left;" src="https://www.tiny.cloud/images/drive-demo/hero-background-campaign-alternate.png" alt="" width="332" height="221" /></p>', 'draft', '2019-06-21 21:59:52.947+03', '2019-06-21 21:59:52.947+03') 
INSERT INTO public.article VALUES ('1797c55d-4c4b-4590-bb6f-6183aa6976bf', 'f60c641c-03f8-4379-b457-6345eb175ce2', NULL, 'Dier bir blog post', 'Cras gravida, mauris quis aliquam porta, est massa pretium enim, vel efficitur elit tortor at neque. Integer quis nibh massa. Nunc at massa malesuada, placerat leo vel, imperdiet arcu.', '<hr />
<div id="Content">
<div>
<div id="lipsum">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras gravida, mauris quis aliquam porta, est massa pretium enim, vel efficitur elit tortor at neque. Integer quis nibh massa.</p>
<p><span style="font-family: roboto, sans-serif;"> Nunc at massa malesuada, placerat leo vel, imperdiet arcu. Integer semper convallis rhoncus. Cras hendrerit tempor nulla et tristique. Vivamus nec quam in lacus cursus finibus. Morbi <strong>tempus</strong>, quam vitae varius sagittis, tortor ligula sodales elit, eu viverra quam eros et sapien. Aliquam <em>elementum</em> ornare nisl id semper.</span></p>
<p>Vivamus pulvinar a nulla in <span style="text-decoration: underline;">maximus. Donec hendrerit convallis mattis. Ut pretiu</span>m consequat venenatis. Duis auctor rhoncus justo sit amet gravida. Donec sed tempor nibh, in sodales lectus. Morbi at tempus velit. Vestibulum facilisis vulputate dui vel pulvinar. In cursus feugiat elit, eget efficitur purus mollis ac.</p>
</div>
</div>
</div>', '<hr />
<div id="Content">
<div>
<div id="lipsum">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras gravida, mauris quis aliquam porta, est massa pretium enim, vel efficitur elit tortor at neque. Integer quis nibh massa.</p>
<p><span style="font-family: roboto, sans-serif;"> Nunc at massa malesuada, placerat leo vel, imperdiet arcu. Integer semper convallis rhoncus. Cras hendrerit tempor nulla et tristique. Vivamus nec quam in lacus cursus finibus. Morbi <strong>tempus</strong>, quam vitae varius sagittis, tortor ligula sodales elit, eu viverra quam eros et sapien. Aliquam <em>elementum</em> ornare nisl id semper.</span></p>
<p>Vivamus pulvinar a nulla in <span style="text-decoration: underline;">maximus. Donec hendrerit convallis mattis. Ut pretiu</span>m consequat venenatis. Duis auctor rhoncus justo sit amet gravida. Donec sed tempor nibh, in sodales lectus. Morbi at tempus velit. Vestibulum facilisis vulputate dui vel pulvinar. In cursus feugiat elit, eget efficitur purus mollis ac.</p>
</div>
</div>
</div>', 'draft', '2019-06-21 21:59:52.985+03', '2019-06-21 21:59:52.985+03') 
--
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: -
--
INSERT INTO public.category VALUES ('f8b6cb49-d371-4693-8416-a850e70f92da', NULL, '{}', 0, 0, 'Live Light', '') 
INSERT INTO public.category VALUES ('12113aa0-7b85-43b3-923c-31e4b8741b2b', 'f8b6cb49-d371-4693-8416-a850e70f92da', '{f8b6cb49-d371-4693-8416-a850e70f92da}', 0, 1, 'Beslenme', 'Salkl Beslenme, Zararl Besinler, Faydal Bitkiler') 
INSERT INTO public.category VALUES ('33ee7f66-6802-4a20-84ae-f0a238209fce', 'f8b6cb49-d371-4693-8416-a850e70f92da', '{f8b6cb49-d371-4693-8416-a850e70f92da}', 1, 1, 'Spor', 'Fitness, Kou, Crossfit ..') 
INSERT INTO public.category VALUES ('19de6609-d6e6-40ff-9cd6-27c0f1ff0cd6', 'f8b6cb49-d371-4693-8416-a850e70f92da', '{f8b6cb49-d371-4693-8416-a850e70f92da}', 2, 1, 'Psikoloji', 'Stres Ynetimi, Psikoljik rahatszlklar ve kkenleri') 
INSERT INTO public.category VALUES ('65d57305-582d-44b9-80f2-263258282a78', 'f8b6cb49-d371-4693-8416-a850e70f92da', '{f8b6cb49-d371-4693-8416-a850e70f92da}', 3, 1, 'Kiisel Geliim', 'Baar, Motivasyon, Mutluluk ..') 
INSERT INTO public.category VALUES ('bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4', NULL, '{}', 1, 0, 'Yaam', '') 
INSERT INTO public.category VALUES ('3c7544c5-24a0-458b-b7b3-8d324375110a', 'bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4', '{bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4}', 0, 1, 'likiler', 'letiim, Aile, Toplumsal Cinsiyet') 
INSERT INTO public.category VALUES ('7a55815e-7356-4243-b67b-8b8618e0d2f1', 'bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4', '{bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4}', 1, 1, 'Kltr & Sanat', 'Kitaplar, Sanat Tarihi, Gncel Haberler') 
INSERT INTO public.category VALUES ('eb92f516-da11-4636-9fc8-60ff3be201ff', 'bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4', '{bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4}', 2, 1, 'Eitim', 'renme, Etkin Eitim') 
INSERT INTO public.category VALUES ('b73e26e9-63e3-4757-ab80-80d96941c25b', 'bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4', '{bb1b41bd-d7cb-4ba7-8691-54ba27ff86d4}', 3, 1, 'Teknoloji', 'Teknolojik Gelimeler, Giriimler') 
INSERT INTO public.category VALUES ('727b7063-0a64-4172-ba46-a41a2f9148a2', NULL, '{}', 2, 0, 'Yoga & Pilates', '') 
INSERT INTO public.category VALUES ('22ff8d0f-c1d0-4532-9bc5-b3cd3e422a21', '727b7063-0a64-4172-ba46-a41a2f9148a2', '{727b7063-0a64-4172-ba46-a41a2f9148a2}', 0, 1, 'Yoga', 'Yoga Trleri, Pozlar, Faydalar') 
INSERT INTO public.category VALUES ('f149fb9c-0d50-474a-bc68-018b78bcf534', '727b7063-0a64-4172-ba46-a41a2f9148a2', '{727b7063-0a64-4172-ba46-a41a2f9148a2}', 1, 1, 'Pilates', 'Pilates Hareketleri, Faydalar') 
INSERT INTO public.category VALUES ('5dd5581c-e1fa-4086-8f0f-bf5e9e08a53b', '727b7063-0a64-4172-ba46-a41a2f9148a2', '{727b7063-0a64-4172-ba46-a41a2f9148a2}', 2, 1, 'Meditasyon', 'Meditasyon Teknikleri, Nefes') 
INSERT INTO public.category VALUES ('3dae1735-822c-46c0-9451-db77b6898e4a', '727b7063-0a64-4172-ba46-a41a2f9148a2', '{727b7063-0a64-4172-ba46-a41a2f9148a2}', 3, 1, 'Egzersizler', 'Yoga ve Pilates Egzersizleri, Videolar') 
INSERT INTO public.category VALUES ('7d646b9e-a258-4f72-9e69-fa6dc9097aaa', NULL, '{}', 3, 0, 'Gezi', '') 
INSERT INTO public.category VALUES ('82bf992d-699f-4cd8-8c25-f4048fbff612', '7d646b9e-a258-4f72-9e69-fa6dc9097aaa', '{7d646b9e-a258-4f72-9e69-fa6dc9097aaa}', 0, 1, 'Gezi Rehberi', 'Gezi nerileri, Rotalar, Doal Gzellikler') 
--
-- Data for Name: article_categories; Type: TABLE DATA; Schema: public; Owner: -
--
INSERT INTO public.article_categories VALUES ('65d57305-582d-44b9-80f2-263258282a78', 'cb2d2ca4-0c3a-4829-ac89-33703955c2a6') 
INSERT INTO public.article_categories VALUES ('b73e26e9-63e3-4757-ab80-80d96941c25b', '1797c55d-4c4b-4590-bb6f-6183aa6976bf') 
--
-- Data for Name: comment; Type: TABLE DATA; Schema: public; Owner: -
--
INSERT INTO public.comment VALUES (1, 'cb2d2ca4-0c3a-4829-ac89-33703955c2a6', 'c6dd240b-be4f-4083-a605-e51edb73f23c', 'Doktor bu ne?') 
INSERT INTO public.comment VALUES (2, 'cb2d2ca4-0c3a-4829-ac89-33703955c2a6', 'c6dd240b-be4f-4083-a605-e51edb73f23c', 'Gzel olmu.') 
INSERT INTO public.comment VALUES (3, 'cb2d2ca4-0c3a-4829-ac89-33703955c2a6', 'c6dd240b-be4f-4083-a605-e51edb73f23c', 'Hi olmu mu?') 
INSERT INTO public.comment VALUES (4, 'cb2d2ca4-0c3a-4829-ac89-33703955c2a6', 'c6dd240b-be4f-4083-a605-e51edb73f23c', 'Eline salk') 
INSERT INTO public.comment VALUES (5, '1797c55d-4c4b-4590-bb6f-6183aa6976bf', 'c6dd240b-be4f-4083-a605-e51edb73f23c', 'Peki dierleri ne yapt?') 
INSERT INTO public.comment VALUES (6, '1797c55d-4c4b-4590-bb6f-6183aa6976bf', 'c6dd240b-be4f-4083-a605-e51edb73f23c', 'e yaramaz.') 
INSERT INTO public.comment VALUES (7, '1797c55d-4c4b-4590-bb6f-6183aa6976bf', 'c6dd240b-be4f-4083-a605-e51edb73f23c', 'Neden byle oldu ki?') 
INSERT INTO public.comment VALUES (8, '1797c55d-4c4b-4590-bb6f-6183aa6976bf', 'c6dd240b-be4f-4083-a605-e51edb73f23c', 'Sebebi neydi?') 
--
-- Data for Name: role; Type: TABLE DATA; Schema: public; Owner: -
--
INSERT INTO public.role VALUES (1, 'admin') 
INSERT INTO public.role VALUES (2, 'member') 
--
-- Data for Name: member_roles; Type: TABLE DATA; Schema: public; Owner: -
--
INSERT INTO public.member_roles VALUES (2, 'f60c641c-03f8-4379-b457-6345eb175ce2') 
INSERT INTO public.member_roles VALUES (2, 'c6dd240b-be4f-4083-a605-e51edb73f23c') 
--
-- Data for Name: motto; Type: TABLE DATA; Schema: public; Owner: -
--
--
-- Name: comment_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--
SELECT pg_catalog.setval('public.comment_id_seq', 8, true) 
setval	
8	
--
-- Name: motto_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--
SELECT pg_catalog.setval('public.motto_id_seq', 1, false) 
setval	
1	
--
-- Name: role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--
SELECT pg_catalog.setval('public.role_id_seq', 2, true) 
setval	
2	
--
-- PostgreSQL database dump complete
--

-------
21/06/2019 22:06:05
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
22/26/2019 10:26:44
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
26/36/2019 23:36:24
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
26/36/2019 23:36:26
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
26/36/2019 23:36:27
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
26/36/2019 23:36:36
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
26/36/2019 23:36:37
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
26/36/2019 23:36:37
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/03/2019 17:03:20
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/03/2019 17:03:20
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/03/2019 17:03:21
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/16/2019 17:16:27
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/16/2019 17:16:28
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/16/2019 17:16:28
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/17/2019 17:17:05
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/17/2019 17:17:06
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/17/2019 17:17:06
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/17/2019 17:17:31
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/17/2019 17:17:31
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/17/2019 17:17:32
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/00/2019 19:00:07
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/00/2019 19:00:08
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/00/2019 19:00:09
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/12/2019 21:12:20
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/12/2019 21:12:21
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
29/12/2019 21:12:21
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/39/2019 00:39:09
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/39/2019 00:39:09
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/39/2019 00:39:10
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/41/2019 00:41:04
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/41/2019 00:41:05
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/41/2019 00:41:05
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/42/2019 00:42:31
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/42/2019 00:42:32
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 

-------
30/42/2019 00:42:32
-------

alter table if exists article drop constraint if exists fk_article_member_id 
drop index if exists ix_article_member_id 
alter table if exists article drop constraint if exists fk_article_image_id 
drop index if exists ix_article_image_id 
alter table if exists category drop constraint if exists fk_category_parent_id 
drop index if exists ix_category_parent_id 
alter table if exists article_categories drop constraint if exists fk_article_categories_category 
drop index if exists ix_article_categories_category 
alter table if exists article_categories drop constraint if exists fk_article_categories_article 
drop index if exists ix_article_categories_article 
alter table if exists comment drop constraint if exists fk_comment_article_id 
drop index if exists ix_comment_article_id 
alter table if exists comment drop constraint if exists fk_comment_member_id 
drop index if exists ix_comment_member_id 
alter table if exists member_roles drop constraint if exists fk_member_roles_role 
drop index if exists ix_member_roles_role 
alter table if exists member_roles drop constraint if exists fk_member_roles_member 
drop index if exists ix_member_roles_member 
drop table if exists article cascade 
drop table if exists category cascade 
drop table if exists article_categories cascade 
drop table if exists comment cascade 
drop table if exists image cascade 
drop table if exists member cascade 
drop table if exists motto cascade 
drop table if exists role cascade 
drop table if exists member_roles cascade 
drop index if exists ix_article_status 
drop index if exists ix_article_created_at 
drop index if exists ix_article_updated_at 
drop index if exists ix_image_extension 
drop index if exists ix_image_size 
drop index if exists ix_image_uploaded_at 
drop index if exists ix_member_user_name 
create table article (
  id                            uuid not null,
  member_id                     uuid not null,
  image_id                      uuid,
  title                         varchar(255) not null,
  summary                       text not null,
  content                       text not null,
  raw_content                   text not null,
  status                        varchar(9) not null,
  created_at                    timestamptz not null,
  updated_at                    timestamptz not null,
  constraint ck_article_status check ( status in ('draft','published')),
  constraint pk_article primary key (id)
) 
create table category (
  id                            uuid not null,
  parent_id                     uuid,
  ancestors                     uuid[] not null,
  sort                          integer not null,
  level                         integer not null,
  name                          varchar(255) not null,
  definition                    text not null,
  constraint uq_category_name unique (name),
  constraint pk_category primary key (id)
) 
create table article_categories (
  category_id                   uuid not null,
  article_id                    uuid not null,
  constraint pk_article_categories primary key (category_id,article_id)
) 
create table comment (
  id                            bigserial not null,
  article_id                    uuid not null,
  member_id                     uuid not null,
  content                       text not null,
  constraint pk_comment primary key (id)
) 
create table image (
  id                            uuid not null,
  base_name                     varchar(255) not null,
  extension                     varchar(255) not null,
  size                          float not null,
  uploaded_at                   timestamptz not null,
  constraint pk_image primary key (id)
) 
create table member (
  id                            uuid not null,
  user_name                     varchar(255) not null,
  password                      varchar(255) not null,
  constraint pk_member primary key (id)
) 
create table motto (
  id                            bigserial not null,
  phrase                        text not null,
  author                        varchar(255) not null,
  constraint pk_motto primary key (id)
) 
create table role (
  id                            bigserial not null,
  name                          varchar(255) not null,
  constraint uq_role_name unique (name),
  constraint pk_role primary key (id)
) 
create table member_roles (
  role_id                       bigint not null,
  member_id                     uuid not null,
  constraint pk_member_roles primary key (role_id,member_id)
) 
create index ix_article_status on article (status) 
create index ix_article_created_at on article (created_at) 
create index ix_article_updated_at on article (updated_at) 
create index ix_image_extension on image (extension) 
create index ix_image_size on image (size) 
create index ix_image_uploaded_at on image (uploaded_at) 
create index ix_member_user_name on member (user_name) 
create index ix_article_member_id on article (member_id) 
alter table article add constraint fk_article_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_article_image_id on article (image_id) 
alter table article add constraint fk_article_image_id foreign key (image_id) references image (id) on delete set null on update set null 
create index ix_category_parent_id on category (parent_id) 
alter table category add constraint fk_category_parent_id foreign key (parent_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_category on article_categories (category_id) 
alter table article_categories add constraint fk_article_categories_category foreign key (category_id) references category (id) on delete restrict on update restrict 
create index ix_article_categories_article on article_categories (article_id) 
alter table article_categories add constraint fk_article_categories_article foreign key (article_id) references article (id) on delete restrict on update restrict 
create index ix_comment_article_id on comment (article_id) 
alter table comment add constraint fk_comment_article_id foreign key (article_id) references article (id) on delete cascade on update cascade 
create index ix_comment_member_id on comment (member_id) 
alter table comment add constraint fk_comment_member_id foreign key (member_id) references member (id) on delete restrict on update restrict 
create index ix_member_roles_role on member_roles (role_id) 
alter table member_roles add constraint fk_member_roles_role foreign key (role_id) references role (id) on delete restrict on update restrict 
create index ix_member_roles_member on member_roles (member_id) 
alter table member_roles add constraint fk_member_roles_member foreign key (member_id) references member (id) on delete restrict on update restrict 
